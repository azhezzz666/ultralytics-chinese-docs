---
comments: true
description: å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Ultralytics é¢„æµ‹æ¨¡å¼ä»æ¨ç†ç»“æœä¸­æå–éš”ç¦»å¯¹è±¡ã€‚åˆ†å‰²å¯¹è±¡éš”ç¦»çš„åˆ†æ­¥æŒ‡å—ã€‚
keywords: Ultralytics, åˆ†å‰², å¯¹è±¡éš”ç¦», é¢„æµ‹æ¨¡å¼, YOLO11, æœºå™¨å­¦ä¹ , ç›®æ ‡æ£€æµ‹, äºŒå€¼æ©ç , å›¾åƒå¤„ç†
---

# éš”ç¦»åˆ†å‰²å¯¹è±¡

åœ¨æ‰§è¡Œ[åˆ†å‰²ä»»åŠ¡](../tasks/segment.md)åï¼Œæœ‰æ—¶éœ€è¦ä»æ¨ç†ç»“æœä¸­æå–éš”ç¦»çš„å¯¹è±¡ã€‚æœ¬æŒ‡å—æä¾›äº†ä¸€ä¸ªé€šç”¨æ–¹æ³•ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨ Ultralytics [é¢„æµ‹æ¨¡å¼](../modes/predict.md)æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚

<p align="center">
  <br>
  <iframe loading="lazy" width="720" height="405" src="https://www.youtube.com/embed/5HBB5IBuJ6c"
    title="YouTube video player" frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    allowfullscreen>
  </iframe>
  <br>
  <strong>è§‚çœ‹ï¼š</strong> å¦‚ä½•ä½¿ç”¨ Ultralytics YOLO åˆ†å‰²å’Œ OpenCV åœ¨ Python ä¸­ç§»é™¤èƒŒæ™¯å¹¶éš”ç¦»å¯¹è±¡ ğŸš€
</p>

## æ–¹æ³•è¯¦è§£

1.  è¯·å‚é˜… [Ultralytics å¿«é€Ÿå…¥é—¨å®‰è£…éƒ¨åˆ†](../quickstart.md)ï¼Œå¿«é€Ÿäº†è§£å¦‚ä½•å®‰è£…æ‰€éœ€çš„åº“ã€‚

    ***

2.  åŠ è½½æ¨¡å‹å¹¶åœ¨æºä¸Šè¿è¡Œ `predict()` æ–¹æ³•ã€‚

    ```python
    from ultralytics import YOLO

    # åŠ è½½æ¨¡å‹
    model = YOLO("yolo11n-seg.pt")

    # è¿è¡Œæ¨ç†
    results = model.predict()
    ```

    !!! question "æ²¡æœ‰é¢„æµ‹å‚æ•°ï¼Ÿ"

        å¦‚æœä¸æŒ‡å®šæºï¼Œå°†ä½¿ç”¨åº“ä¸­çš„ç¤ºä¾‹å›¾åƒï¼š

        ```
        'ultralytics/assets/bus.jpg'
        'ultralytics/assets/zidane.jpg'
        ```

        è¿™å¯¹äºä½¿ç”¨ `predict()` æ–¹æ³•è¿›è¡Œå¿«é€Ÿæµ‹è¯•å¾ˆæœ‰å¸®åŠ©ã€‚

    æœ‰å…³åˆ†å‰²æ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®[åˆ†å‰²ä»»åŠ¡](../tasks/segment.md#models)é¡µé¢ã€‚è¦äº†è§£æ›´å¤šå…³äº `predict()` æ–¹æ³•çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£çš„[é¢„æµ‹æ¨¡å¼](../modes/predict.md)éƒ¨åˆ†ã€‚

    ***

3.  ç°åœ¨éå†ç»“æœå’Œè½®å»“ã€‚å¯¹äºæƒ³è¦å°†å›¾åƒä¿å­˜åˆ°æ–‡ä»¶çš„å·¥ä½œæµç¨‹ï¼Œä¼šæ£€ç´¢æºå›¾åƒçš„ `base-name` å’Œæ£€æµ‹çš„ `class-label` ä»¥ä¾›åç»­ä½¿ç”¨ï¼ˆå¯é€‰ï¼‰ã€‚

    ```{ .py .annotate }
    from pathlib import Path

    import numpy as np

    # (2) éå†æ£€æµ‹ç»“æœï¼ˆå¯¹å¤šå¼ å›¾åƒå¾ˆæœ‰å¸®åŠ©ï¼‰
    for r in results:
        img = np.copy(r.orig_img)
        img_name = Path(r.path).stem  # æºå›¾åƒåŸºæœ¬åç§°

        # éå†æ¯ä¸ªå¯¹è±¡è½®å»“ï¼ˆå¤šä¸ªæ£€æµ‹ï¼‰
        for ci, c in enumerate(r):
            # (1) è·å–æ£€æµ‹ç±»åˆ«åç§°
            label = c.names[c.boxes.cls.tolist().pop()]
    ```

    1. è¦äº†è§£æ›´å¤šå…³äºå¤„ç†æ£€æµ‹ç»“æœçš„ä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„è¾¹ç•Œæ¡†éƒ¨åˆ†](../modes/predict.md#boxes)ã€‚
    2. è¦äº†è§£æ›´å¤šå…³äº `predict()` ç»“æœçš„ä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„ç»“æœå¤„ç†](../modes/predict.md#working-with-results)

    ??? info "For å¾ªç¯"

        å•å¼ å›¾åƒåªä¼šè¿­ä»£ç¬¬ä¸€ä¸ªå¾ªç¯ä¸€æ¬¡ã€‚åªæœ‰å•ä¸ªæ£€æµ‹çš„å•å¼ å›¾åƒæ¯ä¸ªå¾ªç¯åªä¼šè¿­ä»£ä¸€æ¬¡ã€‚

    ***

4.  é¦–å…ˆä»æºå›¾åƒç”ŸæˆäºŒå€¼æ©ç ï¼Œç„¶ååœ¨æ©ç ä¸Šç»˜åˆ¶å¡«å……è½®å»“ã€‚è¿™å°†å…è®¸å°†å¯¹è±¡ä¸å›¾åƒçš„å…¶ä»–éƒ¨åˆ†éš”ç¦»ã€‚å³ä¾§æ˜¾ç¤ºäº† `bus.jpg` ä¸­æ£€æµ‹åˆ°çš„ä¸€ä¸ª `person` ç±»åˆ«å¯¹è±¡çš„ç¤ºä¾‹ã€‚

    ![äºŒå€¼æ©ç å›¾åƒ](https://github.com/ultralytics/ultralytics/assets/62214284/59bce684-fdda-4b17-8104-0b4b51149aca){ width="240", align="right" }

    ```{ .py .annotate }
    import cv2

    # åˆ›å»ºäºŒå€¼æ©ç 
    b_mask = np.zeros(img.shape[:2], np.uint8)

    # (1) æå–è½®å»“ç»“æœ
    contour = c.masks.xy.pop()
    # (2) æ›´æ”¹ç±»å‹
    contour = contour.astype(np.int32)
    # (3) é‡å¡‘å½¢çŠ¶
    contour = contour.reshape(-1, 1, 2)


    # åœ¨æ©ç ä¸Šç»˜åˆ¶è½®å»“
    _ = cv2.drawContours(b_mask, [contour], -1, (255, 255, 255), cv2.FILLED)
    ```

    1. æœ‰å…³ `c.masks.xy` çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„æ©ç éƒ¨åˆ†](../modes/predict.md#masks)ã€‚

    2. è¿™é‡Œå°†å€¼è½¬æ¢ä¸º `np.int32` ä»¥å…¼å®¹ [OpenCV](https://www.ultralytics.com/glossary/opencv) çš„ `drawContours()` å‡½æ•°ã€‚

    3. OpenCV çš„ `drawContours()` å‡½æ•°æœŸæœ›è½®å»“å…·æœ‰ `[N, 1, 2]` çš„å½¢çŠ¶ï¼Œå±•å¼€ä¸‹é¢çš„éƒ¨åˆ†äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

    <details>
    <summary> å±•å¼€ä»¥äº†è§£å®šä¹‰ <code>contour</code> å˜é‡æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚</summary>
    <p>
    - `c.masks.xy` :: ä»¥ `(x, y)` æ ¼å¼æä¾›æ©ç è½®å»“ç‚¹çš„åæ ‡ã€‚æœ‰å…³æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„æ©ç éƒ¨åˆ†](../modes/predict.md#masks)ã€‚
    - `.pop()` :: ç”±äº `masks.xy` æ˜¯ä¸€ä¸ªåŒ…å«å•ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œä½¿ç”¨ `pop()` æ–¹æ³•æå–è¯¥å…ƒç´ ã€‚
    - `.astype(np.int32)` :: ä½¿ç”¨ `masks.xy` å°†è¿”å› `float32` æ•°æ®ç±»å‹ï¼Œä½†è¿™ä¸ OpenCV çš„ `drawContours()` å‡½æ•°ä¸å…¼å®¹ï¼Œå› æ­¤å°†æ•°æ®ç±»å‹æ›´æ”¹ä¸º `int32` ä»¥å®ç°å…¼å®¹ã€‚
    - `.reshape(-1, 1, 2)` :: å°†æ•°æ®é‡æ–°æ ¼å¼åŒ–ä¸ºæ‰€éœ€çš„ `[N, 1, 2]` å½¢çŠ¶ï¼Œå…¶ä¸­ `N` æ˜¯è½®å»“ç‚¹çš„æ•°é‡ï¼Œæ¯ä¸ªç‚¹ç”±å•ä¸ªæ¡ç›® `1` è¡¨ç¤ºï¼Œè¯¥æ¡ç›®ç”± `2` ä¸ªå€¼ç»„æˆã€‚`-1` è¡¨ç¤ºæ­¤ç»´åº¦çš„å€¼æ•°é‡æ˜¯çµæ´»çš„ã€‚

    </details>
    <p></p>
    <details>
    <summary> å±•å¼€ä»¥äº†è§£ <code>drawContours()</code> é…ç½®çš„è¯´æ˜ã€‚</summary>
    <p>
    - åœ¨æµ‹è¯•ä¸­å‘ç°ï¼Œå°† `contour` å˜é‡å°è£…åœ¨æ–¹æ‹¬å· `[contour]` ä¸­å¯ä»¥æœ‰æ•ˆç”Ÿæˆæ‰€éœ€çš„è½®å»“æ©ç ã€‚
    - ä¸º `drawContours()` å‚æ•°æŒ‡å®šçš„å€¼ `-1` æŒ‡ç¤ºå‡½æ•°ç»˜åˆ¶å›¾åƒä¸­å­˜åœ¨çš„æ‰€æœ‰è½®å»“ã€‚
    - `tuple` `(255, 255, 255)` è¡¨ç¤ºç™½è‰²ï¼Œè¿™æ˜¯åœ¨æ­¤äºŒå€¼æ©ç ä¸­ç»˜åˆ¶è½®å»“æ‰€éœ€çš„é¢œè‰²ã€‚
    - æ·»åŠ  `cv2.FILLED` å°†ä½¿è½®å»“è¾¹ç•Œå†…çš„æ‰€æœ‰åƒç´ ç€è‰²ç›¸åŒï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæ‰€æœ‰å°é—­çš„åƒç´ éƒ½å°†æ˜¯ç™½è‰²ã€‚
    - æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [OpenCV å…³äº `drawContours()` çš„æ–‡æ¡£](https://docs.opencv.org/4.8.0/d6/d6e/group__imgproc__draw.html#ga746c0625f1781f1ffc9056259103edbc)ã€‚

    </details>
    <p></p>

    ***

5.  æ¥ä¸‹æ¥æœ‰ 2 ä¸ªé€‰é¡¹å¯ä»¥ä»è¿™ä¸€ç‚¹ç»§ç»­å¤„ç†å›¾åƒï¼Œæ¯ä¸ªé€‰é¡¹éƒ½æœ‰åç»­é€‰é¡¹ã€‚

    ### å¯¹è±¡éš”ç¦»é€‰é¡¹

    !!! example

        === "é»‘è‰²èƒŒæ™¯åƒç´ "

            ```python
            # åˆ›å»º 3 é€šé“æ©ç 
            mask3ch = cv2.cvtColor(b_mask, cv2.COLOR_GRAY2BGR)

            # ä½¿ç”¨äºŒå€¼æ©ç éš”ç¦»å¯¹è±¡
            isolated = cv2.bitwise_and(mask3ch, img)
            ```

            ??? question "è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"

                - é¦–å…ˆï¼Œå°†äºŒå€¼æ©ç ä»å•é€šé“å›¾åƒè½¬æ¢ä¸ºä¸‰é€šé“å›¾åƒã€‚è¿™ç§è½¬æ¢å¯¹äºåç»­æ­¥éª¤æ˜¯å¿…è¦çš„ï¼Œåœ¨è¯¥æ­¥éª¤ä¸­æ©ç å’ŒåŸå§‹å›¾åƒè¢«ç»„åˆã€‚ä¸¤ä¸ªå›¾åƒå¿…é¡»å…·æœ‰ç›¸åŒæ•°é‡çš„é€šé“æ‰èƒ½ä¸æ··åˆæ“ä½œå…¼å®¹ã€‚

                - ä½¿ç”¨ OpenCV å‡½æ•° `bitwise_and()` åˆå¹¶åŸå§‹å›¾åƒå’Œä¸‰é€šé“äºŒå€¼æ©ç ã€‚æ­¤æ“ä½œä»…ä¿ç•™ä¸¤ä¸ªå›¾åƒä¸­å¤§äºé›¶ `(> 0)` çš„åƒç´ å€¼ã€‚ç”±äºæ©ç åƒç´ ä»…åœ¨è½®å»“åŒºåŸŸå†…å¤§äºé›¶ `(> 0)`ï¼Œå› æ­¤ä»åŸå§‹å›¾åƒä¿ç•™çš„åƒç´ æ˜¯ä¸è½®å»“é‡å çš„åƒç´ ã€‚

            ### é»‘è‰²åƒç´ éš”ç¦»ï¼šå­é€‰é¡¹

            ??? info "å…¨å°ºå¯¸å›¾åƒ"

                å¦‚æœä¿æŒå…¨å°ºå¯¸å›¾åƒï¼Œåˆ™ä¸éœ€è¦é¢å¤–æ­¥éª¤ã€‚

                <figure markdown>
                    ![ç¤ºä¾‹å…¨å°ºå¯¸éš”ç¦»å¯¹è±¡å›¾åƒé»‘è‰²èƒŒæ™¯](https://github.com/ultralytics/docs/releases/download/0/full-size-isolated-object-black-background.avif){ width=240 }
                    <figcaption>ç¤ºä¾‹å…¨å°ºå¯¸è¾“å‡º</figcaption>
                </figure>

            ??? info "è£å‰ªå¯¹è±¡å›¾åƒ"

                éœ€è¦é¢å¤–æ­¥éª¤å°†å›¾åƒè£å‰ªä¸ºä»…åŒ…å«å¯¹è±¡åŒºåŸŸã€‚

                ![ç¤ºä¾‹è£å‰ªéš”ç¦»å¯¹è±¡å›¾åƒé»‘è‰²èƒŒæ™¯](https://github.com/ultralytics/docs/releases/download/0/example-crop-isolated-object-image-black-background.avif){ align="right" }
                ```{ .py .annotate }
                # (1) è¾¹ç•Œæ¡†åæ ‡
                x1, y1, x2, y2 = c.boxes.xyxy.cpu().numpy().squeeze().astype(np.int32)
                # å°†å›¾åƒè£å‰ªåˆ°å¯¹è±¡åŒºåŸŸ
                iso_crop = isolated[y1:y2, x1:x2]
                ```

                1.  æœ‰å…³[è¾¹ç•Œæ¡†](https://www.ultralytics.com/glossary/bounding-box)ç»“æœçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„è¾¹ç•Œæ¡†éƒ¨åˆ†](../modes/predict.md#boxes)

                ??? question "è¿™æ®µä»£ç åšäº†ä»€ä¹ˆï¼Ÿ"

                    - `c.boxes.xyxy.cpu().numpy()` è°ƒç”¨ä»¥ `xyxy` æ ¼å¼å°†è¾¹ç•Œæ¡†ä½œä¸º NumPy æ•°ç»„æ£€ç´¢ï¼Œå…¶ä¸­ `xmin`ã€`ymin`ã€`xmax` å’Œ `ymax` è¡¨ç¤ºè¾¹ç•Œæ¡†çŸ©å½¢çš„åæ ‡ã€‚æœ‰å…³æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„è¾¹ç•Œæ¡†éƒ¨åˆ†](../modes/predict.md#boxes)ã€‚

                    - `squeeze()` æ“ä½œä» NumPy æ•°ç»„ä¸­åˆ é™¤ä»»ä½•ä¸å¿…è¦çš„ç»´åº¦ï¼Œç¡®ä¿å®ƒå…·æœ‰é¢„æœŸçš„å½¢çŠ¶ã€‚

                    - ä½¿ç”¨ `.astype(np.int32)` è½¬æ¢åæ ‡å€¼å°†è¾¹ç•Œæ¡†åæ ‡æ•°æ®ç±»å‹ä» `float32` æ›´æ”¹ä¸º `int32`ï¼Œä½¿å…¶ä¸ä½¿ç”¨ç´¢å¼•åˆ‡ç‰‡è¿›è¡Œå›¾åƒè£å‰ªå…¼å®¹ã€‚

                    - æœ€åï¼Œä½¿ç”¨ç´¢å¼•åˆ‡ç‰‡ä»å›¾åƒä¸­è£å‰ªè¾¹ç•Œæ¡†åŒºåŸŸã€‚è¾¹ç•Œç”±æ£€æµ‹è¾¹ç•Œæ¡†çš„ `[ymin:ymax, xmin:xmax]` åæ ‡å®šä¹‰ã€‚

        === "é€æ˜èƒŒæ™¯åƒç´ "

            ```python
            # ä½¿ç”¨é€æ˜èƒŒæ™¯éš”ç¦»å¯¹è±¡ï¼ˆä¿å­˜ä¸º PNG æ—¶ï¼‰
            isolated = np.dstack([img, b_mask])
            ```

            ??? question "è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"

                - å°† NumPy çš„ `dstack()` å‡½æ•°ï¼ˆæ²¿æ·±åº¦è½´å †å æ•°ç»„ï¼‰ä¸ç”Ÿæˆçš„äºŒå€¼æ©ç ç»“åˆä½¿ç”¨ï¼Œå°†åˆ›å»ºä¸€ä¸ªå››é€šé“å›¾åƒã€‚è¿™å…è®¸åœ¨ä¿å­˜ä¸º `PNG` æ–‡ä»¶æ—¶ï¼Œå¯¹è±¡è½®å»“å¤–çš„æ‰€æœ‰åƒç´ éƒ½æ˜¯é€æ˜çš„ã€‚

            ### é€æ˜åƒç´ éš”ç¦»ï¼šå­é€‰é¡¹

            ??? info "å…¨å°ºå¯¸å›¾åƒ"

                å¦‚æœä¿æŒå…¨å°ºå¯¸å›¾åƒï¼Œåˆ™ä¸éœ€è¦é¢å¤–æ­¥éª¤ã€‚

                <figure markdown>
                    ![ç¤ºä¾‹å…¨å°ºå¯¸éš”ç¦»å¯¹è±¡å›¾åƒæ— èƒŒæ™¯](https://github.com/ultralytics/docs/releases/download/0/example-full-size-isolated-object-image-no-background.avif){ width=240 }
                    <figcaption>ç¤ºä¾‹å…¨å°ºå¯¸è¾“å‡º + é€æ˜èƒŒæ™¯</figcaption>
                </figure>

            ??? info "è£å‰ªå¯¹è±¡å›¾åƒ"

                éœ€è¦é¢å¤–æ­¥éª¤å°†å›¾åƒè£å‰ªä¸ºä»…åŒ…å«å¯¹è±¡åŒºåŸŸã€‚

                ![ç¤ºä¾‹è£å‰ªéš”ç¦»å¯¹è±¡å›¾åƒæ— èƒŒæ™¯](https://github.com/ultralytics/docs/releases/download/0/example-crop-isolated-object-image-no-background.avif){ align="right" }
                ```{ .py .annotate }
                # (1) è¾¹ç•Œæ¡†åæ ‡
                x1, y1, x2, y2 = c.boxes.xyxy.cpu().numpy().squeeze().astype(np.int32)
                # å°†å›¾åƒè£å‰ªåˆ°å¯¹è±¡åŒºåŸŸ
                iso_crop = isolated[y1:y2, x1:x2]
                ```

                1.  æœ‰å…³è¾¹ç•Œæ¡†ç»“æœçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„è¾¹ç•Œæ¡†éƒ¨åˆ†](../modes/predict.md#boxes)

                ??? question "è¿™æ®µä»£ç åšäº†ä»€ä¹ˆï¼Ÿ"

                    - ä½¿ç”¨ `c.boxes.xyxy.cpu().numpy()` æ—¶ï¼Œè¾¹ç•Œæ¡†ä½œä¸º NumPy æ•°ç»„è¿”å›ï¼Œä½¿ç”¨ `xyxy` è¾¹ç•Œæ¡†åæ ‡æ ¼å¼ï¼Œå¯¹åº”äºè¾¹ç•Œæ¡†ï¼ˆçŸ©å½¢ï¼‰çš„ç‚¹ `xmin, ymin, xmax, ymax`ï¼Œæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼çš„è¾¹ç•Œæ¡†éƒ¨åˆ†](../modes/predict.md#boxes)ã€‚

                    - æ·»åŠ  `squeeze()` ç¡®ä¿ä» NumPy æ•°ç»„ä¸­åˆ é™¤ä»»ä½•å¤šä½™çš„ç»´åº¦ã€‚

                    - ä½¿ç”¨ `.astype(np.int32)` è½¬æ¢åæ ‡å€¼å°†è¾¹ç•Œæ¡†åæ ‡æ•°æ®ç±»å‹ä» `float32` æ›´æ”¹ä¸º `int32`ï¼Œè¿™å°†ä¸ä½¿ç”¨ç´¢å¼•åˆ‡ç‰‡è£å‰ªå›¾åƒå…¼å®¹ã€‚

                    - æœ€åï¼Œä½¿ç”¨ç´¢å¼•åˆ‡ç‰‡è£å‰ªè¾¹ç•Œæ¡†çš„å›¾åƒåŒºåŸŸï¼Œå…¶ä¸­è¾¹ç•Œä½¿ç”¨æ£€æµ‹è¾¹ç•Œæ¡†çš„ `[ymin:ymax, xmin:xmax]` åæ ‡è®¾ç½®ã€‚

    ??? question "å¦‚æœæˆ‘æƒ³è¦è£å‰ªçš„å¯¹è±¡**åŒ…å«**èƒŒæ™¯æ€ä¹ˆåŠï¼Ÿ"

        è¿™æ˜¯ Ultralytics åº“çš„å†…ç½®åŠŸèƒ½ã€‚æœ‰å…³è¯¦æƒ…ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼æ¨ç†å‚æ•°](../modes/predict.md#inference-arguments)ä¸­çš„ `save_crop` å‚æ•°ã€‚

    ***

6.  <u>æ¥ä¸‹æ¥åšä»€ä¹ˆå®Œå…¨ç”±æ‚¨ä½œä¸ºå¼€å‘è€…å†³å®šã€‚</u>ä¸‹é¢æ˜¾ç¤ºäº†ä¸€ä¸ªå¯èƒ½çš„ä¸‹ä¸€æ­¥çš„åŸºæœ¬ç¤ºä¾‹ï¼ˆå°†å›¾åƒä¿å­˜åˆ°æ–‡ä»¶ä»¥ä¾›å°†æ¥ä½¿ç”¨ï¼‰ã€‚
    - **æ³¨æ„ï¼š**æ­¤æ­¥éª¤æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ‚¨çš„ç‰¹å®šç”¨ä¾‹ä¸éœ€è¦ï¼Œå¯ä»¥è·³è¿‡ã€‚

    ??? example "ç¤ºä¾‹æœ€ç»ˆæ­¥éª¤"

        ```python
        # å°†éš”ç¦»çš„å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶
        _ = cv2.imwrite(f"{img_name}_{label}-{ci}.png", iso_crop)
        ```

        - åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ`img_name` æ˜¯æºå›¾åƒæ–‡ä»¶çš„åŸºæœ¬åç§°ï¼Œ`label` æ˜¯æ£€æµ‹åˆ°çš„ç±»åˆ«åç§°ï¼Œ`ci` æ˜¯[ç›®æ ‡æ£€æµ‹](https://www.ultralytics.com/glossary/object-detection)çš„ç´¢å¼•ï¼ˆå¦‚æœæœ‰å¤šä¸ªç›¸åŒç±»åˆ«åç§°çš„å®ä¾‹ï¼‰ã€‚

## å®Œæ•´ç¤ºä¾‹ä»£ç 

è¿™é‡Œï¼Œå°†ä¸Šä¸€èŠ‚çš„æ‰€æœ‰æ­¥éª¤ç»„åˆæˆä¸€ä¸ªä»£ç å—ã€‚å¯¹äºé‡å¤ä½¿ç”¨ï¼Œæœ€å¥½å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ‰§è¡Œ `for` å¾ªç¯ä¸­åŒ…å«çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å‘½ä»¤ï¼Œä½†è¿™ç•™ç»™è¯»è€…ä½œä¸ºç»ƒä¹ ã€‚

```{ .py .annotate }
from pathlib import Path

import cv2
import numpy as np

from ultralytics import YOLO

m = YOLO("yolo11n-seg.pt")  # (4)!
res = m.predict(source="path/to/image.jpg")  # (3)!

# éå†æ£€æµ‹ç»“æœ (5)
for r in res:
    img = np.copy(r.orig_img)
    img_name = Path(r.path).stem

    # éå†æ¯ä¸ªå¯¹è±¡è½®å»“ (6)
    for ci, c in enumerate(r):
        label = c.names[c.boxes.cls.tolist().pop()]

        b_mask = np.zeros(img.shape[:2], np.uint8)

        # åˆ›å»ºè½®å»“æ©ç  (1)
        contour = c.masks.xy.pop().astype(np.int32).reshape(-1, 1, 2)
        _ = cv2.drawContours(b_mask, [contour], -1, (255, 255, 255), cv2.FILLED)

        # é€‰æ‹©ä¸€ä¸ªï¼š

        # é€‰é¡¹-1ï¼šä½¿ç”¨é»‘è‰²èƒŒæ™¯éš”ç¦»å¯¹è±¡
        mask3ch = cv2.cvtColor(b_mask, cv2.COLOR_GRAY2BGR)
        isolated = cv2.bitwise_and(mask3ch, img)

        # é€‰é¡¹-2ï¼šä½¿ç”¨é€æ˜èƒŒæ™¯éš”ç¦»å¯¹è±¡ï¼ˆä¿å­˜ä¸º PNG æ—¶ï¼‰
        isolated = np.dstack([img, b_mask])

        # å¯é€‰ï¼šæ£€æµ‹è£å‰ªï¼ˆæ¥è‡ªé€‰é¡¹1æˆ–é€‰é¡¹2ï¼‰
        x1, y1, x2, y2 = c.boxes.xyxy.cpu().numpy().squeeze().astype(np.int32)
        iso_crop = isolated[y1:y2, x1:x2]

        # åœ¨æ­¤æ·»åŠ æ‚¨çš„è‡ªå®šä¹‰åå¤„ç† (2)
```

1. å¡«å…… `contour` çš„è¡Œåœ¨è¿™é‡Œåˆå¹¶ä¸ºä¸€è¡Œï¼Œè€Œä¸Šé¢æ˜¯åˆ†å¼€çš„ã€‚
2. {==è¿™é‡Œæ”¾ä»€ä¹ˆç”±æ‚¨å†³å®šï¼==}
3. æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼](../modes/predict.md)ã€‚
4. æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[åˆ†å‰²ä»»åŠ¡](../tasks/segment.md#models)ã€‚
5. äº†è§£æ›´å¤šå…³äº[ç»“æœå¤„ç†](../modes/predict.md#working-with-results)
6. äº†è§£æ›´å¤šå…³äº[åˆ†å‰²æ©ç ç»“æœ](../modes/predict.md#masks)

## å¸¸è§é—®é¢˜

### å¦‚ä½•ä½¿ç”¨ Ultralytics YOLO11 è¿›è¡Œåˆ†å‰²ä»»åŠ¡ä¸­çš„å¯¹è±¡éš”ç¦»ï¼Ÿ

è¦ä½¿ç”¨ Ultralytics YOLO11 éš”ç¦»å¯¹è±¡ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. **åŠ è½½æ¨¡å‹å¹¶è¿è¡Œæ¨ç†ï¼š**

    ```python
    from ultralytics import YOLO

    model = YOLO("yolo11n-seg.pt")
    results = model.predict(source="path/to/your/image.jpg")
    ```

2. **ç”ŸæˆäºŒå€¼æ©ç å¹¶ç»˜åˆ¶è½®å»“ï¼š**

    ```python
    import cv2
    import numpy as np

    img = np.copy(results[0].orig_img)
    b_mask = np.zeros(img.shape[:2], np.uint8)
    contour = results[0].masks.xy[0].astype(np.int32).reshape(-1, 1, 2)
    cv2.drawContours(b_mask, [contour], -1, (255, 255, 255), cv2.FILLED)
    ```

3. **ä½¿ç”¨äºŒå€¼æ©ç éš”ç¦»å¯¹è±¡ï¼š**
    ```python
    mask3ch = cv2.cvtColor(b_mask, cv2.COLOR_GRAY2BGR)
    isolated = cv2.bitwise_and(mask3ch, img)
    ```

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[é¢„æµ‹æ¨¡å¼](../modes/predict.md)å’Œ[åˆ†å‰²ä»»åŠ¡](../tasks/segment.md)æŒ‡å—ã€‚

### åˆ†å‰²åä¿å­˜éš”ç¦»å¯¹è±¡æœ‰å“ªäº›é€‰é¡¹ï¼Ÿ

Ultralytics YOLO11 æä¾›ä¸¤ä¸ªä¸»è¦é€‰é¡¹æ¥ä¿å­˜éš”ç¦»å¯¹è±¡ï¼š

1. **ä½¿ç”¨é»‘è‰²èƒŒæ™¯ï¼š**

    ```python
    mask3ch = cv2.cvtColor(b_mask, cv2.COLOR_GRAY2BGR)
    isolated = cv2.bitwise_and(mask3ch, img)
    ```

2. **ä½¿ç”¨é€æ˜èƒŒæ™¯ï¼š**
    ```python
    isolated = np.dstack([img, b_mask])
    ```

æœ‰å…³æ›´å¤šè¯¦æƒ…ï¼Œè¯·è®¿é—®[é¢„æµ‹æ¨¡å¼](../modes/predict.md)éƒ¨åˆ†ã€‚

### å¦‚ä½•ä½¿ç”¨ Ultralytics YOLO11 å°†éš”ç¦»å¯¹è±¡è£å‰ªåˆ°å…¶è¾¹ç•Œæ¡†ï¼Ÿ

è¦å°†éš”ç¦»å¯¹è±¡è£å‰ªåˆ°å…¶è¾¹ç•Œæ¡†ï¼š

1. **æ£€ç´¢è¾¹ç•Œæ¡†åæ ‡ï¼š**

    ```python
    x1, y1, x2, y2 = results[0].boxes.xyxy[0].cpu().numpy().astype(np.int32)
    ```

2. **è£å‰ªéš”ç¦»å›¾åƒï¼š**
    ```python
    iso_crop = isolated[y1:y2, x1:x2]
    ```

åœ¨[é¢„æµ‹æ¨¡å¼](../modes/predict.md#boxes)æ–‡æ¡£ä¸­äº†è§£æ›´å¤šå…³äºè¾¹ç•Œæ¡†ç»“æœçš„ä¿¡æ¯ã€‚

### ä¸ºä»€ä¹ˆåº”è¯¥åœ¨åˆ†å‰²ä»»åŠ¡ä¸­ä½¿ç”¨ Ultralytics YOLO11 è¿›è¡Œå¯¹è±¡éš”ç¦»ï¼Ÿ

Ultralytics YOLO11 æä¾›ï¼š

- **é«˜é€Ÿ**å®æ—¶ç›®æ ‡æ£€æµ‹å’Œåˆ†å‰²ã€‚
- **ç²¾ç¡®çš„è¾¹ç•Œæ¡†å’Œæ©ç ç”Ÿæˆ**ï¼Œç”¨äºç²¾ç¡®çš„å¯¹è±¡éš”ç¦»ã€‚
- **å…¨é¢çš„æ–‡æ¡£**å’Œæ˜“äºä½¿ç”¨çš„ APIï¼Œå®ç°é«˜æ•ˆå¼€å‘ã€‚

åœ¨[åˆ†å‰²ä»»åŠ¡æ–‡æ¡£](../tasks/segment.md)ä¸­æ¢ç´¢ä½¿ç”¨ YOLO çš„å¥½å¤„ã€‚

### æˆ‘å¯ä»¥ä½¿ç”¨ Ultralytics YOLO11 ä¿å­˜åŒ…å«èƒŒæ™¯çš„éš”ç¦»å¯¹è±¡å—ï¼Ÿ

æ˜¯çš„ï¼Œè¿™æ˜¯ Ultralytics YOLO11 çš„å†…ç½®åŠŸèƒ½ã€‚åœ¨ `predict()` æ–¹æ³•ä¸­ä½¿ç”¨ `save_crop` å‚æ•°ã€‚ä¾‹å¦‚ï¼š

```python
results = model.predict(source="path/to/your/image.jpg", save_crop=True)
```

åœ¨[é¢„æµ‹æ¨¡å¼æ¨ç†å‚æ•°](../modes/predict.md#inference-arguments)éƒ¨åˆ†é˜…è¯»æ›´å¤šå…³äº `save_crop` å‚æ•°çš„ä¿¡æ¯ã€‚
